IF 
    (SELECT `PAYMENT`.`PAYMENT_STATE` 
    FROM `PAYMENT` 
    WHERE `PAYMENT_ID` = ?) = 'IN PROGRESS'
    OR
    (SELECT `PAYMENT`.`PAYMENT_STATE` 
    FROM `PAYMENT` 
    WHERE `PAYMENT_ID` = ?) = 'WAITING FOR PAYMENT'
THEN
    UPDATE `PAYMENT`
    SET `PAYMENT_VALUE` = ?
    WHERE `PAYMENT_ID` = ?;

    SELECT * 
    FROM `PAYMENT`
    JOIN `PAYMENT_TYPE` `PAYMENT_PAYMENT_TYPE` ON `PAYMENT`.`PAYMENT_TYPE_ID` = `PAYMENT_PAYMENT_TYPE`.`PAYMENT_TYPE_ID`
    WHERE `PAYMENT_ID` = ?;
END IF;